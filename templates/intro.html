{% extends 'base.html' %}

{% block script %}
<script>
    function preventBack() { window.history.forward(); }    
    setTimeout("preventBack()", 0);  
    window.onunload = function () { null }; 

    function fn1(){
        window.location="s1";
    }
</script>
{% endblock %}

{% block headline %}

<p class="t_note">

    Your task is to navigate the metro lines from the starting station at 8:30, and to reach your destination before 9:00.<br>
    Please plan your route accordingly and avoid unnecessary detours to ensure you arrive in time. 
<br><br>
    At each station, you will have 90 seconds to choose an action, which will lead you to the next station. <br>
    While the clock time will increase based on your choices, the 90-seconds decision time does not affect the clock. 
    <br><br>
    To successfully complete the task, you must arrive your destination before 9:00, and make decisions within the allotted 90 seconds at any station. 

</p>


{% endblock %}

{% block top_block %}

<p class="t_note">
    This section will display your destination, current station, clock time, and the remaining time to make a decision. <br>
    The current station and clock time will update based on your action choice. <br>    
</p>
Goal Station:   ***
<br><br>

<div>
    Current station: <span style="border: 1px solid #000; padding: 5px; padding-left: 3%;padding-right: 3%;border-radius: 3px;">***</span>
</div>
<br>
<div>
    Clock Time: <span style="border: 1px solid #000; padding: 5px; border-radius: 3px;padding-left: 3%;padding-right: 3%;">{{current_time}}</span>
</div>
<br>
<div>
    Time left to make an action: 
    <span id="timer" style="border: 1px solid #000; padding: 5px; border-radius: 3px;padding-left: 3%;padding-right: 3%;">90</span> seconds
</div>
{% endblock %}



{% block left_block %}
<p class="t_note">
    A metro map will be shown here for you to design your trip. (This map is only an example)<br>
    Note: In this experiment, we don't count the transfer time if you need to change the metro line. 
</p>
<p class="t_map">    
    It takes * mins between each Blue Line station. <br>
    It takes * mins between each Red Line station. <br>
    It takes * mins between each Yellow Line station. <br>
</p>


<br>
<div class="container">
    <img src="{{ url_for('static', filename='img/map_intro.jpg') }}" alt="Example Image" style="width: 80%;">
</div>

{% endblock %}

{% block right_block %}
<p class="t_note">
    Here, you can choose your action, which will take you to the next station, with the clock time adjusting accordingly. <br>
    Available choices will be shown in their metro colors, while unavailable options will be greyed out. <br>
    Once selected, your choice will change from white text to black text.

    </p>
    <div class="form-action">
    <form method="POST">
        {{ form.hidden_tag() }}

        {% for subfield, choice in zip(form.action, choices) %}
            <div class="radio">
                {{ subfield(disabled=not choice[2], id=subfield.id, class_="colored-radio " + choice[0]) }}
                <label for="{{ subfield.id }}" class="colored-label {{ choice[0] }}">
                    {{ choice[1] | safe }}
                </label>
            </div>
        {% endfor %}

    </form>
    </div>

<p class="t_note">
    If you have understood everything, please click the button "Start" to access the game. All the notes in the boxes will disappear there. 
</p>
<br>
<button onclick="fn1()" id="btn1" class = "continue-btn">Start</button>
{% endblock %}